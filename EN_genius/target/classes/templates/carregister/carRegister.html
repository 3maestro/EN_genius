<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layout/default}">

<th:block layout:fragment="customTitle">
	<title>EN_genius</title>
</th:block>
<th:block layout:fragment="contentFragment">

	<script
		src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
	<script type="text/javascript">
	
	$(document).ready(function(){
		
		$(document).on('change','#carModelSm',function(){
			console.log($(this).val());
		})
			$(document).on('change','#carClassSm',function(){
			console.log($(this).val());
		})
		
		$('#originSm').change(function(){
			var contents = '<option>선택해주세요</option>';
			var originSm = $(this).val();
			console.log(originSm);
			
			var request = $.ajax({
				  url: "getCarVendor",
				  method: "POST",
				  data: { 'originSm' : originSm },
				  dataType: "json"
				});
			
				request.done(function(vendorSm) {
					for(var i = 0; i < vendorSm.length; i++){
						contents += '<option value = "'+vendorSm[i]+'">'+vendorSm[i]+'</option>'
					}
					$('#vendorSm').html(contents)
				});
				 
				
				
				request.fail(function( jqXHR, textStatus ) {
				  alert( "Request failed: " + textStatus );
				});
		})

		$(document).on('change','#vendorSm',function(){
			var contents = '<option>선택해주세요</option>';
			var vendorSm = $(this).val();
			console.log(vendorSm);
			
			var request = $.ajax({
				  url: "getCarClass",
				  method: "POST",
				  data: { 'vendorSm' : vendorSm },
				  dataType: "json"
				});
			
				request.done(function(carClassSm) {
					console.log(carClassSm[0].carClassCode);
				for(var i = 0; i < carClassSm.length; i++){
					contents += '<option value = "'+carClassSm[i].carClassMain+'">'+carClassSm[i].carClassMain+'</option>'
						
					}
					$('#carClassSm').html(contents)
				});
				
				request.fail(function( jqXHR, textStatus ) {
				  alert( "Request failed: " + textStatus );
				}); 
		})
		
	$(document).on('change','#carClassSm',function(){
			var contents = '<option>선택해주세요</option>';
			var carClassSm = $(this).val();
			var vendorSm = $(this).val();
			console.log(carClassSm);
			console.log(vendorSm);
			
			var request = $.ajax({
				  url: "getCarModel",
				  method: "POST",
				  data: { 'carClassSm' : carClassSm , 'vendorSm' : vendorSm},
				  dataType: "json"
				});
			
				request.done(function(carModelSm) {
					console.log(carModelSm);
					
					for(var i = 0; i < carModelSm.length; i++){
						contents += '<option value = "'+carModelSm.get(i).carClassMain+'">'+carModelSm.get(i).carClassMain+'</option>'
					}
					$('#carModelSm').html(contents)
				});
				 
				
				
				request.fail(function( jqXHR, textStatus ) {
				  alert( "Request failed: " + textStatus );
				}); 
		})
	})	

</script>


	<div class="col col-md-9">
		<div class="card">
			<div class="card-header">
				<strong>차량 등록</strong> <small> 졸리다..</small>
			</div>
			<div class="card-body card-block">
				<form th:action="@{carRegister}" method="Post">
					<div class="form-group">
						<label for="company" class=" form-control-label">차대번호</label><input
							type="text" id="company" placeholder="차대번호" class="form-control"
							name="customerCarInfoCode">
					</div>
					<div class="form-group">
						<label for="vat" class=" form-control-label">고객 이름</label><input
							type="text" id="vat" placeholder="고객 이름" class="form-control"
							name="customerCode">
					</div>
					<div class="form-group">
						<label for="street" class=" form-control-label">차량 번호</label><input
							type="text" id="street" placeholder="차량 번호" class="form-control"
							name="customerCarNumber">
					</div>
					<div class="row form-group">
						<table>

							<tr>
								<td>
									<div class="col col-md-12">
										<label for="originselectSm" class=" form-control-label">국가
											선택</label>
									</div>
									<div>
										<select name="selectSm" id="originSm" class="form-control-sm form-control">
											<option value="0">제작국가 선택</option>
											<option th:value="${originSel.originCode}" th:each="originSel : ${originSelect}" th:text="${originSel.originMain}"></option>
										</select>
									</div>
								</td>

								<td>
									<div class="col col-md-12">
										<label for="selectSm" class=" form-control-label">벤더사
											선택</label>
									</div>
									<div>
										<select name="selectSm2" id="vendorSm"	class="form-control-sm form-control">
											<!-- 벤더사  ajax 로 가져오기 -->
											<!-- <option value="0">제작국가 먼저 선택해주세요</option> -->
											<!-- <option th:value="${vendorSel.vendorCode}" th:each="vendorSel : ${vendorSelect}" th:text="${vendorSel.vendorName}"></option> -->
											
											
										</select>
									</div>
								</td>
							</tr>


							<tr>
								<td>
									<div class="col col-md-12">
										<label for="selectSm" class=" form-control-label">차량
											종류</label>
									</div>
									<div>
										<select name="selectSm3" id="carClassSm"
											class="form-control-sm form-control">
											<!-- <option value="0">차량 종류 선택</option>
											<option th:each="carClassSel : ${carClassSelect}"
												th:text="${carClassSel.carClassMain}">차량 종류 선택</option> -->
										</select>
									</div>
								</td>
								<td>
									<div class="col col-md-12">
										<label for="selectSm" class=" form-control-label">차량
											모델</label>
									</div>
									<div>
										<select name="selectSm4" id="carModelSm"
											class="form-control-sm form-control">
											<!-- <option value="0">차량 모델 선택</option>
											<option th:each="carModelSel : ${carModelSelect}"
												th:text="${carModelSel.carModelName}">차량 모델 선택</option> -->
										</select>
										<th:block th:each="ve : ${vendorList}">
											<input type="text" th:value="${ve.originCode}">
										</th:block>
									</div>
								</td>
							</tr>
							<tr>
								<td>
									<div class="col col-md-12">
										<label for="selectSm" class=" form-control-label">상세
											모델 선택</label>
									</div> <select name="selectSm5" id="yearCarSm"
									class="form-control-sm form-control">
										<option value="0">상세 모델 선택</option>
										<option th:value="${yearCarSel.yearCarCode}" th:each="yearCarSel : ${yearCarSelect}"
											th:text="${yearCarSel.carModelDetail}"></option>
										
								</select>
									</div>
								</td>
								<td>
									<div class="col col-md-12">
										<label for="selectSm" class=" form-control-label">차량
											등급 선택</label>
									</div> <select name="selectSm6" id="opGradeSm"
									class="form-control-sm form-control">
										<option value="0">차량 등급 선택</option>
										<option th:each="opGradeSel : ${opGradeSelect}"
											th:text="${opGradeSel.optionGradeName}">차량 등급 선택</option>

								</select>
									</div>
								</td>
							</tr>
							<tr>
								<td>
									<div class="col col-md-12">
										<label for="selectSm" class=" form-control-label">차량
											선택옵션 선택</label>
									</div> <select name="selectSm7" id="opChoiceSm"
									class="form-control-sm form-control">
										<option th:each="opChoiceSel : ${opChoiceSelect}"
											th:text="${opChoiceSel.choiceOptionName}"></option>


								</select>
									</div>
								</td>
								<td>

									<div class="col col-md-12">
										<label for="selectSm" class=" form-control-label">차량
											컬러 대분류</label>
									</div> <select name="selectSm8" id="bigColSm"
									class="form-control-sm form-control">
										<option value="0">차량 색상 선택</option>
										<option th:each="bigColSel : ${bigColSelect}"
											th:text="${bigColSel.colorBigName}"></option>
								</select>
									</div>
								<td>
							</tr>
							<tr>
								<td>
									<div class="col col-md-12">
										<label for="selectSm" class=" form-control-label">차량
											컬러 상세분류</label>
									</div> <select name="selectSm9" id="midColSm"
									class="form-control-sm form-control">
										<option value="0">상세 색상 선택</option>
										<option th:each="midColSel : ${midColSelect}"
											th:text="${midColSel.colorMidName}"></option>
								</select>
									</div>
								</td>
								<td>
									<div class="col col-md-12">
										<label for="selectSm" class=" form-control-label">연료
											종류</label>
									</div> <select name="selectSm10" id="fuelSm"
									class="form-control-sm form-control">
										<option value="0">차량 연료 선택</option>
										<option th:each="fuelSel : ${fuelSelect}"
											th:text="${fuelSel.fuelType}"></option>

								</select>
									</div>
								<td>
							</tr>
							<tr>
								<td>
									<div class="col col-md-12">
										<label for="selectSm" class=" form-control-label">차량
											종류</label>
									</div> <select name="selectSm11" id="engineSm"
									class="form-control-sm form-control">
										<option value="0">차량 엔진 선택</option>
										<option th:each="engineSel : ${engineSelect}"
											th:text="${engineSel.engineType}">차량 엔진 선택</option>
								</select>
									</div>
								</td>
								<td>
									<div class="col col-md-12">
										<label for="selectSm" class=" form-control-label">차량
											미션</label>
									</div> <select name="selectSm12" id="trnsMiSm"
									class="form-control-sm form-control">
										<option th:each="trnsMiSel : ${trnsMielect}"
											th:text="${trnsMiSel.tmType}">차량 미션 선택</option>

								</select>
									</div>
								<td>
							</tr>
							<tr>
								<td>
									<div class="col col-md-12">
										<label for="selectSm" class=" form-control-label">차량
											구동 방식</label>
									</div> <select name="selectSm13" id="driveWaySm"
									class="form-control-sm form-control">
										<option value="0">구동 방식 선택</option>
										<option th:each="driveWaySel : ${driveWaySelect}"
											th:text="${driveWaySel.dwType}">차량 구동 방식</option>
								</select>
									</div>
								</td>
								<td>
									<div class="col col-md-12">
										<label for="selectSm" class=" form-control-label">엔진
											형식</label>
									</div> <select name="selectSm14" id="powTrainSm"
									class="form-control-sm form-control">
										<option value="0">엔진 형식 선택</option>
										<option th:each="powTrainSel : ${powTrainSelect}"
											th:text="${powTrainSel.engineForm}">엔진 형식</option>
								</select>
									</div>
								<td>
							</tr>
						</table>

					</div>




					<div class="col col-6">
						<div class="form-group">
							<label for="postal-code" class=" form-control-label">생산년도</label><input
								type="text" id="postal-code" placeholder="생산년도"
								class="form-control" name="carProductionYear">
						</div>
					</div>
					<div class="col col-6">
						<div class="form-group">
							<label for="postal-code" class=" form-control-label">자동차
								등록일</label><input type="text" id="postal-code" placeholder="자동차 등록일"
								class="form-control" name="carRegistrationDate">
						</div>
					</div>
					<div class="col col-6">
						<div class="form-group">
							<label for="postal-code" class=" form-control-label">마지막
								방문시 주행거리</label><input type="text" id="postal-code"
								placeholder="마지막 방문시 주행거리" class="form-control"
								name="lastDistanceDriven">
						</div>
					</div>
					<div class="col col-6">
						<div class="form-group">
							<label for="postal-code" class=" form-control-label">마지막
								방문일</label><input type="text" id="postal-code" placeholder="마지막 방문일"
								class="form-control" name="lastVisitDate">
						</div>
					</div>

					<button type="submit" class="btn btn-primary" name="carBtn">차량
						등록</button>
				</form>
			</div>
		</div>
	</div>
</th:block>
</html>
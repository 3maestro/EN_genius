<?xml version="1.0" encoding="UTF-8"?>
<!-- mybatis맵퍼  -->
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  <!-- namespace속성은 인터페이스의 위치를 적는다. -->
  
  
	<!-- 파라미터 타입은 내가 받을 타입을 설정한다 -->
	<!-- 리절트타입은 내가 돌려줄타입을 (리턴타입)설정한다 -->
<mapper namespace="com.cafe24.radev.mapper.CarMapper">
	<!-- id : mapper 관련 메서드명 resultType : vo주소.vo명 -->
	
	<resultMap type="com.cafe24.radev.vo.VoCarDetail" id="CarDetailMap">
		
		<result property="originCode" column="origin_code"/>
		<result property="originMain" column="origin_main"/>
		<result property="vendorCode" column="vendor_code"/>
		<result property="vendorName" column="vendor_name"/>
		<result property="carClassCode" column="car_class_code"/>
		<result property="carClassMain" column="car_class_main"/>
		<result property="carModelCode" column="car_model_code"/>
		<result property="carModelName" column="car_model_name"/>
		<result property="cmWriter" column="cm_writer"/>
		<result property="cmDate" column="cm_date"/>
		<result property="yearCarCode" column="year_car_code"/>
		<result property="carModelDetail" column="car_model_detail"/>
		<result property="sellStartYear" column="sell_start_year"/>
		<result property="sellEndYear" column="sell_end_year"/>
		<result property="ycWriter" column="yc_writer"/>
		<result property="ycDate" column="yc_date"/>
		<result property="customerCarNumber" column="customer_car_number"/>
		<result property="rcCode" column="rc_code"/>
		<result property="carProductionYear" column="car_production_year"/>
		<result property="customerCarInfoCode" column="customer_car_info_code"/>
		<result property="bsCode" column="bs_code"/>
		<result property="customerCode" column="customer_code"/>
		<result property="carRegistrationDate" column="car_registration_date"/>
		<result property="lastDistanceDriven" column="last_distance_driven"/>
		<result property="lastVisitDate" column="last_visit_date"/>
		<result property="customerCarInfoWriter" column="customer_car_info_writer"/>
		<result property="customerCarInfoDate" column="customer_car_info_date"/>
		
	</resultMap>
	
	
		<!-- Datail insert -->
	<insert id="getCarRegister" parameterType="com.cafe24.radev.vo.VoCarRegister">
		INSERT INTO customer_car_info_table
			(customer_car_info_code, bs_code, customer_code, customer_car_number, vendor_code, rc_code, car_production_year, car_registration_date, last_distance_driven, last_visit_date, customer_car_info_writer, customer_car_info_date)
		VALUES 
			(#{customerCarInfoCode}, 'cp001', '123', '123', '123', '123', NOW(), NOW(), '13500', NOW(), 'id002', NOW())
	</insert>
	
	
	<select id="getCarList" resultMap="CarDetailMap">
		SELECT
			customer_car_info_code,bs_code,customer_code,customer_car_number
			,vendor_code,rc_code,car_production_year,car_registration_date
			,last_distance_driven,last_visit_date,customer_car_info_writer
			,customer_car_info_date
		FROM
			customer_car_info_table
	</select>
	
	
	<!-- 연도별 차량 모델 -->
	<select id="getYearCarSelect" resultMap="CarDetailMap">
		SELECT 
			year_car_code,car_model_detail
		FROM 
			year_car_tb
	</select>
	
	
	<!-- 차량 모델 종류 -->
	<select id="getCarModelSelect" resultMap="CarDetailMap">
		SELECT 
			car_model_code, car_model_name,
			cm_writer,cm_date
		FROM 
			car_model_tb
	</select>
	
	
	<!-- 차량 종류 선택 -->
	<select id="getCarClassSelect" resultMap="CarDetailMap">
		SELECT 
			car_class_code, car_class_main
		FROM 
			car_class_tb
	 </select>
	 
	 
	<!-- 제작회사 선택 -->
	<select id="getCarVendorSelect" resultMap="CarDetailMap">
		SELECT 
			vendor_code, vendor_name
		FROM 
			vendor_tb
	</select>
	
	
	<!-- 차량 등록 국가 선택 쿼리 -->
	<select id="getCarOriginSelect" resultMap="CarDetailMap">
		SELECT 
			origin_code, origin_main
	FROM origin_tb
	</select>
	
	
	<!-- 차량 상세 조회 쿼리 -->
	<select id="getCarUpdateList" parameterType="String" resultType="com.cafe24.radev.vo.VoCarDetail">
		SELECT 
			customer_car_info_code AS customerCarInfoCode
			,customer_code AS customerCode 
			,customer_car_number AS customerCarNumber
			,car_production_year AS carProductionYear
			,customer_car_info_date AS customerCarInfoDate
			,customer_car_info_writer AS customerCarInfoWriter
			,last_visit_date AS lastVisitDate
			,last_distance_driven AS lastDistanceDriven
			,car_registration_date AS carRegistrationDate
		FROM
			customer_car_info_table
		WHERE customer_car_info_code = #{carUpList};
	</select>
	
		

	<!-- 값을 [리턴받아] 사용할때 리절트 타입을 사용한다 -->
	<select id="getDBCarVendor" parameterType="String" resultType="com.cafe24.radev.vo.VoCarDetail">
		SELECT
			v.vendor_name AS vendorName
		FROM 
			car_model_tb AS c
		INNER JOIN 
			vendor_tb AS v
		ON 
			v.vendor_code = c.vendor_code
		WHERE 
		 	v.vendor_code = #{vendorSm}

	</select>
	
	<select id="getDBCarModel" parameterType="String" resultType="com.cafe24.radev.vo.VoCarDetail">
		SELECT
			c.car_model_name AS carModelName
		FROM 
			car_model_tb AS c
		INNER JOIN 
			origin_tb AS o
		ON 
			c.origin_code = o.origin_code 
		WHERE 
		 	c.origin_code = #{originSm}

	</select>
	
</mapper>
<?xml version="1.0" encoding="UTF-8"?>
<!-- mybatis맵퍼  -->
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  <!-- namespace속성은 인터페이스의 위치를 적는다. -->
<mapper namespace="com.cafe24.radev.mapper.WageMapper">
	<!-- id : mapper 관련 메서드명 resultType : vo주소.vo명 -->
	<select id="getWorkManHour" resultType="com.cafe24.radev.vo.WageManHour">
		SELECT
			totalWork.*,
			ccWage.standard_wage AS ccStandardWage
		FROM
			cc_standard_wage_tb AS ccWage
		INNER JOIN
			(	
				SELECT
						mh.cc_wage_small_code as ccWageSmallCode,
						mh.cc_wage_code as ccWageCode,
						mh.wage_big_name as wageBigName,
						mh.wage_mid_name as wageMidName,
						mh.wage_small_name as wageSmallName,
						mh.man_hour as manHour
						
					FROM
						work_man_hour_tb AS mh
					INNER join
						(
						SELECT
							MIDCATE.wage_mid_code,
							MIDCATE.wage_big_code,
							MIDCATE.wage_big_name,
							MIDCATE.wage_mid_name
						FROM
							wage_midcate_tb AS MIDCATE
						INNER JOIN
							wage_bigcate_tb AS BIGCATE
						ON
							MIDCATE.wage_big_code = BIGCATE.wage_big_code 
						) AS bm
					ON
						mh.wage_mid_code = bm.wage_mid_code
			) AS totalWork
		ON
			ccWage.cc_wage_code = totalWork.ccWageCode
		WHERE
			ccWage.cc_wage_code = #{ccCode}
		ORDER BY
			ccWageSmallCode
	</select>
	
</mapper>